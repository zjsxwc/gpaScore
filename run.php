<?php

$sixSessionScores = [
    [4, "94"],
    [1, "合格"],
    [4, "77"],
    [6, "80"],
    [3, "良好"],
    [1, "85"],
    [3, "81"],
    [0.5, "合格"],
    [1, "81"],

    [2, "80"],
    [3, "93"],
    [4, "78"],
    [4, "96"],
    [1, "中等"],
    [4, "81"],
    [3, "良好"],
    [1, "88"],
    [1, "中等"],
    [2, "及格"],
    [2.5, "94"],
    [0.5, "合格"],
    [2, "82"],
    [2, "86"],
    [2, "良好"],

    [2, "94"],
    [2, "良好"],
    [2, "89"],
    [3, "89"],
    [2, "良好"],
    [4, "77"],
    [1, "优秀"],
    [1, "90"],
    [0.5, "合格"],
    [2, "80"],

    [2, "中等"],
    [4.5, "91"],
    [3, "78"],
    [2, "中等"],
    [3, "86"],
    [3.5, "85"],
    [1, "优秀"],
    [1, "97"],
    [0.5, "合格"],
    [4.5, "84"],
    [1, "中等"],
    [2, "90"],
    [2, "80"],
    [2, "89"],

    [3, "77"],
    [2, "93"],
    [2, "93"],
    [2.5, "90"],
    [3, "90"],
    [1, "76"],
    [0.5, "中等"],
    [2, "良好"],
    [2, "良好"],
    [3, "78"],
    [2, "优秀"],
    [2, "88"],

    [3, "74"],
    [2, "中等"],
    [0.5, "65"],
    [2, "良好"],
    [3, "优秀"],
    [3.5, "74"],
    [3.5, "82"],
    [3.0, "75"],

//    [2.0, "优秀"],
];


function getCj($d)
{
    if (is_numeric($d)) {
        $d = floatval($d);
        if ($d >= 85) {
            return 4.0;
        }
        if ($d >= 60) {
            $c = 1.5 + ($d - 60.0) * 0.1;
            return $c;
        }
        return 0.0;
    }

    if ($d === "合格") {
        return 3.0;
    }


    if ($d === "优秀") {
        return 4.0;
    }
    if ($d === "优") {
        return 4.0;
    }
    if ($d === "良好") {
        return 3.5;
    }
    if ($d === "良") {
        return 3.5;
    }
    if ($d === "中等") {
        return 2.5;
    }
    if ($d === "中") {
        return 2.5;
    }
    if ($d === "及格") {
        return 1.5;
    }

    return 0.0;
}


$gpa = 0;
$totalXf = 0;
$totalSum = 0;
foreach ($sixSessionScores as $s) {
    $xf = floatval($s[0]);
    $totalXf += $xf;
    $cj = getCj($s[1]);
    $totalSum += $xf * $cj;
}
var_dump($totalSum / $totalXf);
//float(3.5443365695793)
